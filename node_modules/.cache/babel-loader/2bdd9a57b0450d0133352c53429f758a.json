{"ast":null,"code":"import { isNil, sort } from 'ramda';\nexport function selectCheapestAndRecommendedOffer(state) {\n  const offers = state.product.similarProducts;\n\n  if (isNil(offers) || offers.length === 0) {\n    return {};\n  }\n\n  const cheapest = sort((first, second) => first.price - second.price, offers)[0];\n  cheapest.features = [cheapest.clientCount, cheapest.trust, isNil(cheapest.isProtectedDeal) ? null : cheapest.isProtectedDeal ? 'Без риска' : 'Есть риск'].filter(item => !isNil(item));\n  cheapest.descrition = cheapest.productDescription;\n  cheapest.name = cheapest.organizationName;\n  const recommended = sort((first, second) => second.score - first.score, offers)[0];\n  recommended.features = [recommended.clientCount, recommended.trust, isNil(recommended.isProtectedDeal) ? null : recommended.isProtectedDeal ? 'Без риска' : 'Есть риск'].filter(item => !isNil(item));\n  recommended.descrition = recommended.productDescription;\n  recommended.name = recommended.organizationName;\n  return {\n    cheapest,\n    recommended\n  };\n}","map":{"version":3,"sources":["/home/olof/sata-hakaton/src/selectors/product.ts"],"names":["isNil","sort","selectCheapestAndRecommendedOffer","state","offers","product","similarProducts","length","cheapest","first","second","price","features","clientCount","trust","isProtectedDeal","filter","item","descrition","productDescription","name","organizationName","recommended","score"],"mappings":"AACA,SAASA,KAAT,EAAgBC,IAAhB,QAA4B,OAA5B;AAIA,OAAO,SAASC,iCAAT,CAA2CC,KAA3C,EAAyD;AAC5D,QAAMC,MAAM,GAAGD,KAAK,CAACE,OAAN,CAAcC,eAA7B;;AAEA,MAAIN,KAAK,CAACI,MAAD,CAAL,IAAiBA,MAAM,CAACG,MAAP,KAAkB,CAAvC,EAA0C;AACtC,WAAO,EAAP;AACH;;AAED,QAAMC,QAAc,GAAGP,IAAI,CAAC,CAACQ,KAAD,EAA2BC,MAA3B,KAAyDD,KAAK,CAACE,KAAN,GAAcD,MAAM,CAACC,KAA/E,EAAsFP,MAAtF,CAAJ,CAAkG,CAAlG,CAAvB;AACAI,EAAAA,QAAQ,CAACI,QAAT,GAAoB,CAAEJ,QAAQ,CAACK,WAAX,EAAwBL,QAAQ,CAACM,KAAjC,EAAwCd,KAAK,CAACQ,QAAQ,CAACO,eAAV,CAAL,GAAkC,IAAlC,GAA0CP,QAAQ,CAACO,eAAT,GAA2B,WAA3B,GAAyC,WAA3H,EAA0IC,MAA1I,CAAiJC,IAAI,IAAI,CAACjB,KAAK,CAACiB,IAAD,CAA/J,CAApB;AACAT,EAAAA,QAAQ,CAACU,UAAT,GAAsBV,QAAQ,CAACW,kBAA/B;AACAX,EAAAA,QAAQ,CAACY,IAAT,GAAgBZ,QAAQ,CAACa,gBAAzB;AAEA,QAAMC,WAAiB,GAAGrB,IAAI,CAAC,CAACQ,KAAD,EAA2BC,MAA3B,KAAyDA,MAAM,CAACa,KAAP,GAAed,KAAK,CAACc,KAA/E,EAAsFnB,MAAtF,CAAJ,CAAkG,CAAlG,CAA1B;AACAkB,EAAAA,WAAW,CAACV,QAAZ,GAAuB,CAAEU,WAAW,CAACT,WAAd,EAA2BS,WAAW,CAACR,KAAvC,EAA8Cd,KAAK,CAACsB,WAAW,CAACP,eAAb,CAAL,GAAqC,IAArC,GAA6CO,WAAW,CAACP,eAAZ,GAA8B,WAA9B,GAA4C,WAAvI,EAAsJC,MAAtJ,CAA6JC,IAAI,IAAI,CAACjB,KAAK,CAACiB,IAAD,CAA3K,CAAvB;AACAK,EAAAA,WAAW,CAACJ,UAAZ,GAAyBI,WAAW,CAACH,kBAArC;AACAG,EAAAA,WAAW,CAACF,IAAZ,GAAmBE,WAAW,CAACD,gBAA/B;AAEA,SAAO;AAAEb,IAAAA,QAAF;AAAYc,IAAAA;AAAZ,GAAP;AACH","sourcesContent":["import { State } from '../reducers'\nimport { isNil, sort } from 'ramda'\nimport { ProductState } from '../reducers/Product'\n\n\nexport function selectCheapestAndRecommendedOffer(state: State) {\n    const offers = state.product.similarProducts\n\n    if (isNil(offers) || offers.length === 0) {\n        return {}\n    }\n\n    const cheapest : any = sort((first: { price: number }, second: { price: number }) => first.price - second.price, offers)[0]\n    cheapest.features = [ cheapest.clientCount, cheapest.trust, isNil(cheapest.isProtectedDeal) ? null : (cheapest.isProtectedDeal ? 'Без риска' : 'Есть риск') ].filter(item => !isNil(item))\n    cheapest.descrition = cheapest.productDescription\n    cheapest.name = cheapest.organizationName\n\n    const recommended : any = sort((first: { score: number }, second: { score: number }) => second.score - first.score, offers)[0]\n    recommended.features = [ recommended.clientCount, recommended.trust, isNil(recommended.isProtectedDeal) ? null : (recommended.isProtectedDeal ? 'Без риска' : 'Есть риск') ].filter(item => !isNil(item))\n    recommended.descrition = recommended.productDescription\n    recommended.name = recommended.organizationName\n\n    return { cheapest, recommended }\n}"]},"metadata":{},"sourceType":"module"}