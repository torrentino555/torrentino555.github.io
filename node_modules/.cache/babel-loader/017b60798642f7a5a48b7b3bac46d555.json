{"ast":null,"code":"export function selectSearchProducts(state) {\n  const positions = state.search.positions;\n\n  if (!positions || positions && positions.length === 0) {\n    return [];\n  }\n\n  const products = {};\n  Object.values(positions).map(item => {\n    if (!item.productId) {\n      return {};\n    }\n\n    const company = {\n      id: item.organizationId,\n      name: item.organizationName,\n      clientCount: item.clientCount,\n      organizationType: item.organizationType,\n      trust: item.trust,\n      score: item.score * 5,\n      price: item.price,\n      location: item.location\n    };\n\n    if (products.hasOwnProperty(item.productId)) {\n      products[item.productId].companies.push(company);\n    } else {\n      products[item.productId] = {\n        id: item.productId,\n        name: item.productName,\n        score: item.score,\n        type: item.type,\n        companies: [company]\n      };\n    }\n\n    return {};\n  });\n  return Object.values(products);\n}","map":{"version":3,"sources":["/home/olof/sata-hakaton/front/src/selectors/search.ts"],"names":["selectSearchProducts","state","positions","search","length","products","Object","values","map","item","productId","company","id","organizationId","name","organizationName","clientCount","organizationType","trust","score","price","location","hasOwnProperty","companies","push","productName","type"],"mappings":"AA4BA,OAAO,SAASA,oBAAT,CAA8BC,KAA9B,EAA4C;AAAA,QACvCC,SADuC,GACzBD,KAAK,CAACE,MADmB,CACvCD,SADuC;;AAG/C,MAAI,CAACA,SAAD,IAAeA,SAAS,IAAIA,SAAS,CAACE,MAAV,KAAqB,CAArD,EAAyD;AACrD,WAAO,EAAP;AACH;;AAED,QAAMC,QAAkB,GAAG,EAA3B;AAEAC,EAAAA,MAAM,CAACC,MAAP,CAAcL,SAAd,EAAyBM,GAAzB,CAA6BC,IAAI,IAAI;AACjC,QAAI,CAACA,IAAI,CAACC,SAAV,EAAqB;AACjB,aAAO,EAAP;AACH;;AACD,UAAMC,OAAO,GAAG;AACZC,MAAAA,EAAE,EAAEH,IAAI,CAACI,cADG;AAEZC,MAAAA,IAAI,EAAEL,IAAI,CAACM,gBAFC;AAGZC,MAAAA,WAAW,EAAEP,IAAI,CAACO,WAHN;AAIZC,MAAAA,gBAAgB,EAAER,IAAI,CAACQ,gBAJX;AAKZC,MAAAA,KAAK,EAAET,IAAI,CAACS,KALA;AAMZC,MAAAA,KAAK,EAAEV,IAAI,CAACU,KAAL,GAAW,CANN;AAOZC,MAAAA,KAAK,EAAEX,IAAI,CAACW,KAPA;AAQZC,MAAAA,QAAQ,EAAEZ,IAAI,CAACY;AARH,KAAhB;;AAUA,QAAIhB,QAAQ,CAACiB,cAAT,CAAwBb,IAAI,CAACC,SAA7B,CAAJ,EAA6C;AACzCL,MAAAA,QAAQ,CAACI,IAAI,CAACC,SAAN,CAAR,CAAyBa,SAAzB,CAAmCC,IAAnC,CAAwCb,OAAxC;AACH,KAFD,MAEO;AACHN,MAAAA,QAAQ,CAACI,IAAI,CAACC,SAAN,CAAR,GAA2B;AACvBE,QAAAA,EAAE,EAAEH,IAAI,CAACC,SADc;AACHI,QAAAA,IAAI,EAAEL,IAAI,CAACgB,WADR;AACqBN,QAAAA,KAAK,EAAEV,IAAI,CAACU,KADjC;AACwCO,QAAAA,IAAI,EAAEjB,IAAI,CAACiB,IADnD;AACyDH,QAAAA,SAAS,EAAE,CAACZ,OAAD;AADpE,OAA3B;AAGH;;AACD,WAAO,EAAP;AACH,GAtBD;AAwBA,SAAOL,MAAM,CAACC,MAAP,CAAcF,QAAd,CAAP;AACH","sourcesContent":["import { State } from '../reducers'\nimport { OrganizationType, ProductType, TrustLevel } from '../dto/Product'\n\n\nexport interface ICompany {\n    id: number\n    name: string\n    // рейтинг position у данного клиента\n    score: number\n    price: number\n    trust: TrustLevel\n    organizationType: OrganizationType\n    clientCount: number\n    location?: string\n}\n\nexport interface ISearchItem {\n    id: number\n    score: number\n    name: string\n    type: ProductType\n    companies: ICompany[]\n}\n\nexport interface ISearch {\n    [id :number]: ISearchItem\n}\n\nexport function selectSearchProducts(state: State) {\n    const { positions } = state.search\n\n    if (!positions || (positions && positions.length === 0)) {\n        return []\n    }\n\n    const products : ISearch = {}\n\n    Object.values(positions).map(item => {\n        if (!item.productId) {\n            return {}\n        }\n        const company = {\n            id: item.organizationId,\n            name: item.organizationName,\n            clientCount: item.clientCount,\n            organizationType: item.organizationType,\n            trust: item.trust,\n            score: item.score*5,\n            price: item.price,\n            location: item.location\n        }\n        if (products.hasOwnProperty(item.productId)) {\n            products[item.productId].companies.push(company)\n        } else {\n            products[item.productId] = {\n                id: item.productId, name: item.productName, score: item.score, type: item.type, companies: [company]\n            }\n        }\n        return {}\n    })\n\n    return Object.values(products)\n}"]},"metadata":{},"sourceType":"module"}