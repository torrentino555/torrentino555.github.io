{"ast":null,"code":"export function selectSearchProducts(state) {\n  const positions = state.search.positions;\n\n  if (!positions || positions && positions.length === 0) {\n    return [];\n  }\n\n  const products = {};\n  Object.values(positions).map(item => {\n    if (!item.productId) {\n      return {};\n    }\n\n    if (products.hasOwnProperty(item.productId)) {\n      products[item.productId].companies.push({\n        id: item.organizationId,\n        name: item.organizationName,\n        clientCount: item.clientCount,\n        organizationType: item.organizationType,\n        trust: item.trust,\n        score: item.score,\n        price: item.price\n      });\n    } else {\n      products[item.productId] = {\n        id: item.productId,\n        name: item.productName,\n        score: item.score,\n        type: item.type,\n        companies: [{\n          id: item.organizationId,\n          name: item.organizationName,\n          clientCount: item.clientCount,\n          organizationType: item.organizationType,\n          trust: item.trust,\n          score: item.score,\n          price: item.price\n        }]\n      };\n    }\n\n    return {};\n  });\n  return products;\n}","map":{"version":3,"sources":["/home/olof/sata-hakaton/front/src/selectors/search.ts"],"names":["selectSearchProducts","state","positions","search","length","products","Object","values","map","item","productId","hasOwnProperty","companies","push","id","organizationId","name","organizationName","clientCount","organizationType","trust","score","price","productName","type"],"mappings":"AA2BA,OAAO,SAASA,oBAAT,CAA8BC,KAA9B,EAA4C;AAAA,QACvCC,SADuC,GACzBD,KAAK,CAACE,MADmB,CACvCD,SADuC;;AAG/C,MAAI,CAACA,SAAD,IAAeA,SAAS,IAAIA,SAAS,CAACE,MAAV,KAAqB,CAArD,EAAyD;AACrD,WAAO,EAAP;AACH;;AAED,QAAMC,QAAkB,GAAG,EAA3B;AAEAC,EAAAA,MAAM,CAACC,MAAP,CAAcL,SAAd,EAAyBM,GAAzB,CAA6BC,IAAI,IAAI;AACjC,QAAI,CAACA,IAAI,CAACC,SAAV,EAAqB;AACjB,aAAO,EAAP;AACH;;AACD,QAAIL,QAAQ,CAACM,cAAT,CAAwBF,IAAI,CAACC,SAA7B,CAAJ,EAA6C;AACzCL,MAAAA,QAAQ,CAACI,IAAI,CAACC,SAAN,CAAR,CAAyBE,SAAzB,CAAmCC,IAAnC,CAAwC;AACpCC,QAAAA,EAAE,EAAEL,IAAI,CAACM,cAD2B;AAEpCC,QAAAA,IAAI,EAAEP,IAAI,CAACQ,gBAFyB;AAGpCC,QAAAA,WAAW,EAAET,IAAI,CAACS,WAHkB;AAIpCC,QAAAA,gBAAgB,EAAEV,IAAI,CAACU,gBAJa;AAKpCC,QAAAA,KAAK,EAAEX,IAAI,CAACW,KALwB;AAMpCC,QAAAA,KAAK,EAAEZ,IAAI,CAACY,KANwB;AAOpCC,QAAAA,KAAK,EAAEb,IAAI,CAACa;AAPwB,OAAxC;AASH,KAVD,MAUO;AACHjB,MAAAA,QAAQ,CAACI,IAAI,CAACC,SAAN,CAAR,GAA2B;AACvBI,QAAAA,EAAE,EAAEL,IAAI,CAACC,SADc;AACHM,QAAAA,IAAI,EAAEP,IAAI,CAACc,WADR;AACqBF,QAAAA,KAAK,EAAEZ,IAAI,CAACY,KADjC;AACwCG,QAAAA,IAAI,EAAEf,IAAI,CAACe,IADnD;AACyDZ,QAAAA,SAAS,EAAE,CAAC;AACxFE,UAAAA,EAAE,EAAEL,IAAI,CAACM,cAD+E;AAExFC,UAAAA,IAAI,EAAEP,IAAI,CAACQ,gBAF6E;AAGxFC,UAAAA,WAAW,EAAET,IAAI,CAACS,WAHsE;AAIxFC,UAAAA,gBAAgB,EAAEV,IAAI,CAACU,gBAJiE;AAKxFC,UAAAA,KAAK,EAAEX,IAAI,CAACW,KAL4E;AAMxFC,UAAAA,KAAK,EAAEZ,IAAI,CAACY,KAN4E;AAOxFC,UAAAA,KAAK,EAAEb,IAAI,CAACa;AAP4E,SAAD;AADpE,OAA3B;AAWH;;AACD,WAAO,EAAP;AACH,GA5BD;AA8BA,SAAOjB,QAAP;AACH","sourcesContent":["import { State } from '../reducers'\nimport { OrganizationType, ProductType, TrustLevel } from '../dto/Product'\n\n\nexport interface ICompany {\n    id: number\n    name: string\n    // рейтинг position у данного клиента\n    score: number\n    price: number\n    trust: TrustLevel\n    organizationType: OrganizationType\n    clientCount: number\n}\n\nexport interface ISearchItem {\n        id: number\n        score: number\n        name: string\n        type: ProductType\n        companies: ICompany[]\n}\n\nexport interface ISearch {\n    [id :number]: ISearchItem\n}\n\nexport function selectSearchProducts(state: State) {\n    const { positions } = state.search\n\n    if (!positions || (positions && positions.length === 0)) {\n        return []\n    }\n\n    const products : ISearch = {}\n\n    Object.values(positions).map(item => {\n        if (!item.productId) {\n            return {}\n        }\n        if (products.hasOwnProperty(item.productId)) {\n            products[item.productId].companies.push({\n                id: item.organizationId,\n                name: item.organizationName,\n                clientCount: item.clientCount,\n                organizationType: item.organizationType,\n                trust: item.trust,\n                score: item.score,\n                price: item.price\n            })\n        } else {\n            products[item.productId] = {\n                id: item.productId, name: item.productName, score: item.score, type: item.type, companies: [{\n                    id: item.organizationId,\n                    name: item.organizationName,\n                    clientCount: item.clientCount,\n                    organizationType: item.organizationType,\n                    trust: item.trust,\n                    score: item.score,\n                    price: item.price\n                }]\n            }\n        }\n        return {}\n    })\n\n    return products\n}"]},"metadata":{},"sourceType":"module"}