{"ast":null,"code":"import { isNil, sort } from 'ramda';\nexport function selectCheapestAndRecommendedOffer(state) {\n  const offers = state.product.similarProducts;\n\n  if (isNil(offers) || offers.length === 0) {\n    return {};\n  }\n\n  const cheapest = sort((first, second) => first.price - second.price, offers)[0];\n  cheapest.features = [cheapest.clientCount, cheapest.isProtectedDeal, cheapest.trust].filter(item => !isNil(item));\n  const recommended = sort((first, second) => second.score - first.score, offers)[0];\n  recommended.features = [recommended.clientCount, recommended.isProtectedDeal, recommended.trust].filter(item => !isNil(item));\n  return {\n    cheapest,\n    recommended\n  };\n}","map":{"version":3,"sources":["/home/olof/sata-hakaton/src/selectors/product.ts"],"names":["isNil","sort","selectCheapestAndRecommendedOffer","state","offers","product","similarProducts","length","cheapest","first","second","price","features","clientCount","isProtectedDeal","trust","filter","item","recommended","score"],"mappings":"AACA,SAASA,KAAT,EAAgBC,IAAhB,QAA4B,OAA5B;AAIA,OAAO,SAASC,iCAAT,CAA2CC,KAA3C,EAAyD;AAC5D,QAAMC,MAAM,GAAGD,KAAK,CAACE,OAAN,CAAcC,eAA7B;;AAEA,MAAIN,KAAK,CAACI,MAAD,CAAL,IAAiBA,MAAM,CAACG,MAAP,KAAkB,CAAvC,EAA0C;AACtC,WAAO,EAAP;AACH;;AAED,QAAMC,QAAc,GAAGP,IAAI,CAAC,CAACQ,KAAD,EAA2BC,MAA3B,KAAyDD,KAAK,CAACE,KAAN,GAAcD,MAAM,CAACC,KAA/E,EAAsFP,MAAtF,CAAJ,CAAkG,CAAlG,CAAvB;AACAI,EAAAA,QAAQ,CAACI,QAAT,GAAoB,CAAEJ,QAAQ,CAACK,WAAX,EAAwBL,QAAQ,CAACM,eAAjC,EAAkDN,QAAQ,CAACO,KAA3D,EAAmEC,MAAnE,CAA0EC,IAAI,IAAI,CAACjB,KAAK,CAACiB,IAAD,CAAxF,CAApB;AAEA,QAAMC,WAAiB,GAAGjB,IAAI,CAAC,CAACQ,KAAD,EAA2BC,MAA3B,KAAyDA,MAAM,CAACS,KAAP,GAAeV,KAAK,CAACU,KAA/E,EAAsFf,MAAtF,CAAJ,CAAkG,CAAlG,CAA1B;AACAc,EAAAA,WAAW,CAACN,QAAZ,GAAuB,CAAEM,WAAW,CAACL,WAAd,EAA2BK,WAAW,CAACJ,eAAvC,EAAwDI,WAAW,CAACH,KAApE,EAA4EC,MAA5E,CAAmFC,IAAI,IAAI,CAACjB,KAAK,CAACiB,IAAD,CAAjG,CAAvB;AAEA,SAAO;AAAET,IAAAA,QAAF;AAAYU,IAAAA;AAAZ,GAAP;AACH","sourcesContent":["import { State } from '../reducers'\nimport { isNil, sort } from 'ramda'\nimport { ProductState } from '../reducers/Product'\n\n\nexport function selectCheapestAndRecommendedOffer(state: State) {\n    const offers = state.product.similarProducts\n\n    if (isNil(offers) || offers.length === 0) {\n        return {}\n    }\n\n    const cheapest : any = sort((first: { price: number }, second: { price: number }) => first.price - second.price, offers)[0]\n    cheapest.features = [ cheapest.clientCount, cheapest.isProtectedDeal, cheapest.trust ].filter(item => !isNil(item))\n\n    const recommended : any = sort((first: { score: number }, second: { score: number }) => second.score - first.score, offers)[0]\n    recommended.features = [ recommended.clientCount, recommended.isProtectedDeal, recommended.trust ].filter(item => !isNil(item))\n\n    return { cheapest, recommended }\n}"]},"metadata":{},"sourceType":"module"}